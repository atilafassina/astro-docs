---
title: Xata & Astro
description: Add a serverless database with full-text search to your project with Xata
type: backend
service: Xata
stub: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'


[Xata](https://xata.io) is a **Serverless Data Platform** that combines the features of a relational database, a search engine, and an analytics engine by exposing a single consistent REST API.

## Adding a database with Xata

### Prerequisites

- A [Xata](https://app.xata.io/signin) account with a created database. (You can use the sample database from the Web UI.)
- An Access Token (`XATA_TOKEN_API`).
- Your Database URL.

The quickest way to get an API token in your `.env` file and the database url ready to sync your project, is to update and initialize the [Xata CLI](https://xata.io/docs/getting-started/installation). 

By the end of the setup, you should have:

```ini title=".env"
XATA_API_KEY=hash_key

# Xata branch that will be used
# if there's not a xata branch with
# the same name as your git branch
XATA_FALLBACK_BRANCH=main
```

And the `databaseURL` defined:

```ini title=".xatarc
{
  "databaseUrl": "https://your-database-url"
}
```

### Environment configuration

To have IntelliSense for your environment variables, edit or create the file `env.d.ts` in your `/src` directory to make your environment variables type-safe:

```ts title="src/env.d.ts"
interface ImportMetaEnv {
  readonly XATA_API_KEY: string;
  readonly XATA_FALLBACK_BRANCH?: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

:::tip
Read more about [environment variables](/en/guides/environment-variables/) and `.env` files in Astro.
:::

If you used the codegeneration from the Xata CLI, you now have an instance of the SDK (Software Development Kit) generated for you, with types tailored to your database schema - if you chose TypeScript. Notice `@xata.io/client` was added to your `package.json` as well.

Your Xata environment variables and database url are automatically pulled by the SDK instance, so there's no more setup work needed.Finally, your project should have the following structure:

<FileTree title="Project Structure">
- src/
  - **xata.codegen.ts**
  - **env.d.ts**
- **.env**
- astro.config.mjs
- package.json
- **.xatarc**
</FileTree>

## Create your queries

To query your posts, import and use `getXataClient()` in a `.astro` file. The example below queries the first 50 posts from Xata's Sample Blog Database.

```astro title="src/pages/blog/index.astro"
---
import { getXataClient } from "../xata.codegen";

const xata = getXataClient();
const { records } = await xata.db.Posts.getPaginated({
  pagination: {
    size: 50
  }
})
---

<ul>
  {records.map(post) => (
    <li>{post.title}</li>
  )}
</ul>
```
It's important to note the SDK needs to be regenerated everytime your schema changes. So, avoid making changes to the files the Xata CLI creates.


## Official Resources
- [Xata Astro Starter](https://github.com/xataio/examples/tree/main/apps/starter-astro)
- [Xata Docs: Quick Start Guide](https://xata.io/docs/getting-started/quickstart-astro)
